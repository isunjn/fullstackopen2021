{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","put","id","delete","Notification","message","className","type","content","Filter","searchWord","handler","value","onChange","PersonForm","newName","newNumber","nameHandler","numberHandler","submitHandler","onSubmit","Persons","persons","deleteHandler","map","person","name","number","onClick","App","useState","setPersons","setNewName","setNewNumber","setSearchWord","setMessage","useEffect","console","log","personService","shownPersons","trim","filter","toLowerCase","search","e","target","preventDefault","window","confirm","p","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.34b8a568.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data);\n}\n\nconst createPerson = newPerson => {\n  return axios.post(baseUrl, newPerson).then(response => response.data);\n}\n\nconst updatePerson = newPerson => {\n  return axios.put(`${baseUrl}/${newPerson.id}`, newPerson).then(response => response.data);\n}\n\nconst deletePerson = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n}\n\nexport default { getAll, createPerson, updatePerson, deletePerson };","import React, { useState, useEffect } from 'react'\n\nimport personService from './services/persons';\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n  return (\n    <div className={message.type}>{message.content}</div>\n  )\n}\n\nconst Filter = ({ searchWord, handler }) => {\n  return (\n    <div>\n      filter shown with <input value={searchWord} onChange={handler} />\n    </div>\n  )\n}\n\nconst PersonForm = ({ newName, newNumber, nameHandler, numberHandler, submitHandler }) => {\n  return (\n\n    <form onSubmit={submitHandler}>\n      <div>\n        name: <input value={newName} onChange={nameHandler} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={numberHandler} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({ persons, deleteHandler }) => {\n  return (\n    <div>\n      {persons.map(person =>\n        <p key={person.id}>{person.name} {person.number} <button onClick={() => deleteHandler(person.id)}>delete</button></p>\n      )}\n    </div>\n  )\n}\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchWord, setSearchWord] = useState('');\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    console.log('start fetch');\n    personService.getAll().then(persons => {\n      setPersons(persons);\n    });\n  }, [])\n\n\n  const shownPersons = searchWord.trim() === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().search(searchWord.toLowerCase().trim()) >= 0);\n\n  const handleAdd = (e) => {\n    e.preventDefault();\n    for (const person of persons) {\n      if (person.name === newName) {\n        if (window.confirm(`${newName} is already added to phonebook, replace with new number ?`)) {\n          const newPerson = {\n            ...person,\n            number: newNumber\n          }\n          personService.updatePerson(newPerson).then(newPerson => {\n            setPersons(persons.map(p => p.name === newName ? newPerson : p));\n            setNewName('');\n            setNewNumber('');\n            setMessage({ type: 'notify', content: `Updated ${newName}` });\n            setTimeout(() => setMessage(null), 5000);\n          }).catch(error => {\n            setMessage({ type: 'error', content: `Fail to upadte` });\n            setTimeout(() => setMessage(null), 5000);\n          });\n        }\n        return;\n      }\n    }\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    personService.createPerson(newPerson).then(newPerson => {\n      setPersons(persons.concat(newPerson));\n      setNewName('');\n      setNewNumber('');\n      setMessage({ type: 'notify', content: `Added ${newName}` });\n      setTimeout(() => setMessage(null), 5000);\n    }).catch(error => {\n      setMessage({ type: 'error', content: `Person validation failed: ${error.response.data.error}` });\n      setTimeout(() => setMessage(null), 5000);\n    });\n  }\n\n  const handleDelete = id => {\n    if (!window.confirm(`Delete ${id} ?`)) return;\n    personService.deletePerson(id).then(() => {\n      setPersons(persons.filter(person => person.id !== id));\n    });\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  }\n\n  const handleSearchWordChange = (e) => {\n    setSearchWord(e.target.value);\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n      <Filter searchWord={searchWord} handler={handleSearchWordChange} />\n      <h2>Add new</h2>\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        nameHandler={handleNameChange}\n        numberHandler={handleNumberChange}\n        submitHandler={handleAdd} />\n      <h2>Numbers</h2>\n      <Persons persons={shownPersons} deleteHandler={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}