(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(18),r=t.n(c),a=t(9),o=t(19),u=t(3),i=t(2),s=t(4),d=t.n(s),l="/api/persons",b=function(){return d.a.get(l).then((function(e){return e.data}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data}))},f=function(e){return d.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(l,"/").concat(e))},m=t(0),O=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:n.type,children:n.content})},p=function(e){var n=e.searchWord,t=e.handler;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.newName,t=e.newNumber,c=e.nameHandler,r=e.numberHandler,a=e.submitHandler;return Object(m.jsxs)("form",{onSubmit:a,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:c})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.persons,t=e.deleteHandler;return Object(m.jsx)("div",{children:n.map((function(e){return Object(m.jsxs)("p",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})},w=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),s=Object(u.a)(r,2),d=s[0],l=s[1],w=Object(i.useState)(""),y=Object(u.a)(w,2),g=y[0],H=y[1],k=Object(i.useState)(""),C=Object(u.a)(k,2),N=C[0],S=C[1],T=Object(i.useState)(null),A=Object(u.a)(T,2),D=A[0],E=A[1];Object(i.useEffect)((function(){console.log("start fetch"),b().then((function(e){c(e)}))}),[]);var J=""===N.trim()?t:t.filter((function(e){return e.name.toLowerCase().search(N.toLowerCase().trim())>=0}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),Object(m.jsx)(O,{message:D}),Object(m.jsx)(p,{searchWord:N,handler:function(e){S(e.target.value)}}),Object(m.jsx)("h2",{children:"Add new"}),Object(m.jsx)(v,{newName:d,newNumber:g,nameHandler:function(e){l(e.target.value)},numberHandler:function(e){H(e.target.value)},submitHandler:function(e){e.preventDefault();var n,r=Object(o.a)(t);try{for(r.s();!(n=r.n()).done;){var u=n.value;if(u.name===d){if(window.confirm("".concat(d," is already added to phonebook, replace with new number ?"))){var i=Object(a.a)(Object(a.a)({},u),{},{number:g});f(i).then((function(e){c(t.map((function(n){return n.name===d?e:n}))),l(""),H(""),E({type:"notify",content:"Updated ".concat(d)}),setTimeout((function(){return E(null)}),5e3)})).catch((function(e){E({type:"error",content:"".concat(d," has already been removed from server")}),setTimeout((function(){return E(null)}),5e3)}))}return}}}catch(s){r.e(s)}finally{r.f()}j({name:d,number:g}).then((function(e){c(t.concat(e)),l(""),H(""),E({type:"notify",content:"Added ".concat(d)}),setTimeout((function(){return E(null)}),5e3)}))}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{persons:J,deleteHandler:function(e){window.confirm("Delete ".concat(e," ?"))&&h(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}})]})};t(43);r.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.1e4529ff.chunk.js.map